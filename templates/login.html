{% extends "base.html" %}

{% block title %}Iniciar sesión — Digital Discos{% endblock %}

{% block content %}
<script>window.DD_API_URL = "{{ api_url }}";</script>

<div class="auth-page">
  <div class="auth-card">

    <h1 class="portal-title">Iniciar sesión</h1>
    <div class="portal-divider"></div>

    <form id="form-login" novalidate>

      <div class="portal-field" style="margin-bottom:1rem">
        <label for="login-email">Correo electrónico</label>
        <input type="email" id="login-email" name="email"
               placeholder="tu@correo.com" autocomplete="email" required>
      </div>

      <div class="portal-field">
        <label for="login-password">Contraseña</label>
        <input type="password" id="login-password" name="password"
               placeholder="••••••••" autocomplete="current-password" required>
      </div>

      <p id="login-msg" class="portal-msg"></p>

      <button type="submit" class="btn-portal full-width" data-label="Entrar">
        Entrar
      </button>

    </form>

    <!-- Google Sign-In -->
    <div class="auth-divider"><span>o continuá con</span></div>

    <div id="g_id_onload"
         data-client_id="95650851618-frrstfptk7d7jcucpnmcp0v71q9o0ovt.apps.googleusercontent.com"
         data-callback="handleGoogleCredential"
         data-auto_prompt="false">
    </div>
    <div class="g_id_signin"
         data-type="standard"
         data-size="large"
         data-theme="filled_black"
         data-text="signin_with"
         data-shape="rectangular"
         data-logo_alignment="left"
         style="display:flex;justify-content:center;margin-bottom:0.75rem">
    </div>

    <p id="login-google-msg" class="portal-msg"></p>

    <p class="auth-footer-link">
      ¿No tenés cuenta?
      <a href="/registro">Registrate gratis</a>
    </p>

  </div>
</div>
{% endblock %}

{% block scripts %}
<script>document.body.dataset.page = 'login';</script>
<script src="{{ url_for('static', filename='js/portal.js') }}"></script>
<script src="https://accounts.google.com/gsi/client" async defer></script>
{% endblock %}
